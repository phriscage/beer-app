<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<GenerateJWT async="false" continueOnError="false" enabled="true" name="GenerateJWTBearerJWT">
    <DisplayName>GenerateJWTBearerJWT</DisplayName>
    <Algorithm>RS256</Algorithm>
    <PrivateKey>
        <Value ref="private.privateKey"/>
        <Id ref="private.certificate1_kid"/>
    </PrivateKey>
    <Subject ref="jwt.VerifyJWTBearer.claim.subject"/>
    <Issuer>urn://chrispage-eval.apigee.net</Issuer>
    <Audience ref="jwt.VerifyJWTBearer.claim.audience"/>
    <ExpiresIn>2h</ExpiresIn>
    <NotBefore ref="nbf"/>
    <AdditionalClaims>
        <Claim name="client_id" ref="apigee.client_id"/>
        <Claim name="access_token" ref="apigee.access_token"/>
        <Claim name="api_product_list" ref="apiProductList" type="string" array="true"/>
        <Claim name="application_name" ref="apigee.developer.app.name"/>
        <Claim name="developer_email" ref="apigee.developer.email"/>
        <Claim name="scopes" ref="scope" type="string" array="true"/>
        <!--<Claim name="scopes" type="string" array="true">address,phone,openid,offline_access,profile,email</Claim>-->
        <Claim name="username" ref="request.formparam.username"/>
        <Claim name="email" ref="jwt.VerifyJWTBearer.claim.email"/>
    </AdditionalClaims>
    <OutputVariable>jwt_signed</OutputVariable>
</GenerateJWT>